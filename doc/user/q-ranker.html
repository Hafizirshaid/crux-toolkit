<html>
<title>crux q-ranker</title>
<link href="./crux.css" rel="styleSheet" type="text/css">
</head>
<body>
<blockquote>

<H1 ALIGN=CENTER>crux q-ranker</H1>


<p>
<b>Description:</b></p>

<p>
Q-ranker dynamically learns to separate target from decoy PSMs.  The
algorithm is described in this article:</p>

<blockquote>
Marina Spivak, Jason Weston, Leon Bottou and William Stafford Noble.
<a href="http://noble.gs.washington.edu/papersspivak2009improvements.html">"Direct <i>q</i>&nbsp;value
optimization methods for peptide identification from shotgun
proteomics data sets."</a>  <i>Journal of Proteome Research.</i>
8(7):3737-3745, 2009.
</blockquote>

<p>
<b>Usage:</b></p>

<blockquote>
<code>crux q-ranker [options]
  &lt;protein&nbsp;database&nbsp;folder&gt; &lt;spectra&gt; &lt;search&nbsp;results&gt;</code>
</blockquote>


<p>
<b>Required Input:</b></p>

<ul>

<li>
<b>protein database</b> &ndash; The program requires the FASTA format
protein database files against which the search was performed. The
protein database input may be a concatenated database or separate
target and decoy databases; the latter is supported with the
<code>--separate-searches</code> option, described below. In either
case, Q-ranker distinguishes between target and decoy proteins based on
the presence of a decoy prefix on the sequence identifiers (see
the <code>--decoy-prefix</code> option, below).  The database can be
provided in three different ways: (1) as a a single FASTA file with
suffix ".fa", ".fsa" or ".fasta", (2) as a text file containing a list
of FASTA files, one per line, or (3) as a directory containing
multiple FASTA files (identified via the filename suffixes ".fa",
".fsa" or ".fasta").</li>

<li>
<b>spectra</b> &ndash; The fragmentation spectra must be provided
in <a href="ms2-format.html">MS2 format</a>.  Like the database, the
spectra can be specified in three different ways: (1) as a single file
with suffix ".ms2", (2) as a text file containing a list of MS2 files
or (3) as a directory in which all the MS2 files can be found.</li>


<li>
<b>search results</b> &ndash; Q-ranker recognizes search results
in <a href="sqt-format.html">SQT format</a>.  Like the spectra, the
search results can be provided as a single file, a list of files or a
directory of files.  Note, however, that the input mode for spectra
and for search results must be the same; i.e., if you provide a list
of files for the spectra, then you must also provide a list of files
containing your search results.  When the MS2 files and SQT files are
provided via a file listing, Q-ranker assumes that the order of the MS2
files matches the order of the SQT files.  Alternatively, when the MS2
files and SQT files are provided via directories, Q-ranker will search
for pairs of files with the same root name but different extensions
(".ms2" and ".sqt").</li>

</ul>

<B>Output:</B>

<UL>
<p>
The program writes files to the folder <code>crux-output</code> by
default.  The name of the output folder can be set by the user using
the <code>--output-dir</code> option.  The following files will be
created:</p>

</li>

<li>
 <b> qranker_output.xml </b>: An xml file containing ranked list of target peptide-spectrum matches. The
 following entries are included:
<ol>
<li> psm_id: PSM identifier. </li>
<li>q-value: The minimal PSM-level false discovery rate at which this
  PSM is deemed significant.  This q-value is computed based on the
  ranking of the PSMs induced by the Barista score.</li>
<li>score: The score assigned to the PSM by Barista.  Higher
  values correspond to more confident identifications.</code>
<li>scan: the scan number</li>
<li>charge: the inferred charge state</li>
<li> precursor_mass: precrusor mass as recorded during the MS1 scan </li>
<li>peptide: the peptide sequence</li>
<li>filename: name of the file in which the PSM appears</li>
</ol>
</li>

<li>
<b>qranker.target.psm.txt</b>: a tab-delimited file containing a
ranked list of target peptide-spectrum matches with the associated
Q-ranker scores and q-values.  The following columns are included:
<ol>
<li>q-value: The minimal PSM-level false discovery rate at which this
  PSM is deemed significant.  This q-value is computed based on the
  ranking of the PSMs induced by the Q-ranker score.</li>
<li>q-ranker score: The score assigned to the PSM by Q-ranker.  Higher
  values correspond to more confident identifications.</code>
<li>scan: the scan number</li>
<li>charge: the inferred charge state</li>
<li>peptide: the peptide sequence</li>
<li>filename: name of the file in which the PSM appears</li>
</ol>
</li>


<li>
<b>qranker.log.txt</b>: a file where the program reports its progress. 
</li>

<li>
<b>qranker.params.txt</b>: a file with the values of all the options
given to the current run.
</li>


</ul>



<b>Options:</b>

<ul>

<li>
<code>--enzyme trypsin|chymotrypsin|elastase</code> &ndash; The enzyme
used to digest the proteins in the experiment.  Default =
trypsin.</li>

<li>
<code>--decoy-prefix &lt;string&gt;</code> &ndash; specifies the
prefix of the protein names that indicates a decoy. Default = random_.
</li>

<li>
<code>--separate-searches &lt;search&nbsp;results&gt;</code> &ndash;
If the target and decoy searches were run separately, rather than
using a concatenated database, then Q-ranker will assume that the
database search results provided as a required argument are from the
target database search.  This option then allows the user to specify
the location of the decoy search results.  Like the required
arguments, these search results can be provided as a single file, a
list of files or a directory.  However, the choice (file, list or
directory) must be consistent for the MS2 files and the target and
decoy SQT files.  Also, if the MS2 and SQT files are provided in
directories, then Q-ranker will use the MS2 filename
(<code>foo.ms2</code>) to identify corresponding target and decoy SQT
files with names like <code>foo*.target.sqt</code>
and <code>foo*.decoy.sqt</code>.  This naming convention allows the
target and decoy SQT files to reside in the same directory.</li>

<li>
<code>--fileroot &lt;string&gt;</code> &ndash;
The <code>fileroot</code> string will be added as a prefix to all
output file names. Default = none.</li>

<li>
<code>--output-dir &lt;directory&gt;</code> &ndash; 
The name of the directory where output files will be created.
Default = crux-output.</li>

<li>
<code>--overwrite &lt;T/F&gt;</code> &ndash; The option applies to the
situation when the output directory specified for the run already
exists. If set to T, Q-ranker will overwrite the contents of the
output directory specified for the run. Default = F.</li>

<li>
<code>--skip-cleanup &lt;T/F&gt;</code> &ndash; Q-ranker analysis
begins with a pre-processsing step that creates a set of lookup tables
which are then used during training. Normally, these lookup tables are
deleted at the end of the Q-ranker analysis, but setting this option
to <code>T</code> prevents the deletion of these tables.
Subsequently, the Q-ranker analysis can be repeated more efficiently by
specifying the <code>--re-run</code> option (see below). Default =
F.</li>

<li>
<code>--re-run &lt;directory&gt;</code> &ndash; Re-run a previous
Q-ranker analysis using a previously computed set of lookup tables.
For this option to work, the <code>--skip-cleanup</code> must have
been set to true when Q-ranker was run the first time.</li>

<li>
<code>--use-spec-features &lt;T/F&gt;</code> &ndash; Q-ranker uses
enriched feature set derived from the spectra in ms2 files. It can be
forced to use minimal feature set by setting the --use-spec-features
option to F. Default T.

</ul>

<hr></hr>

<a href="crux.html">Crux home</a>

</blockquote>
</body>
</html>
