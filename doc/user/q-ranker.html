<html>
<title>crux q-ranker</title>
<link href="./crux.css" rel="styleSheet" type="text/css">
</head>
<body>
<blockquote>

<H1 ALIGN=CENTER>crux q-ranker</H1>


<p>
<b>Description:</b></p>

<p>
Q-ranker dynamically learns to separate target from decoy PSMs.  The
algorithm is described in this article:</p>

<blockquote>
Marina Spivak, Jason Weston, Leon Bottou and William Stafford Noble.
<a href="http://noble.gs.washington.edu/papersspivak2009improvements.html">"Direct <i>q</i>&nbsp;value
optimization methods for peptide identification from shotgun
proteomics data sets."</a>  <i>Journal of Proteome Research.</i>
8(7):3737-3745, 2009.
</blockquote>

<p>
<b>Usage:</b></p>

<blockquote>
<code>crux q-ranker [options] &lt;protein&nbsp;database&nbsp;folder&gt; &lt;sqt folder&gt; &lt;ms2 folder&gt;</p> 
<code>crux q-ranker [options] &lt;list&nbsp;of&nbsp;protein&nbsp;database&nbsp;files&gt;&nbsp;&lt;list&nbsp;of&nbsp;sqt&nbsp;files&gt;&nbsp;&lt;list&nbsp;of&nbsp;ms2&nbsp;files&gt; </p> 
<code>crux q-ranker [options] &lt;protein&nbsp;database&nbsp;file&gt;&nbsp;&lt;sqt&nbsp;file&gt;&nbsp;&lt;ms2&nbsp;file&gt; 

</code>
</blockquote>


<p>
<b>Required Input:</b></p>

<ul>

<li>
protein database &ndash; The program requires the FASTA format protein database
files against which the search was performed. The protein database
input may be a concatenated database or separate target and decoy
databases. However, in both cases, the program distinguishes between
target and decoy proteins based on the decoy prefix. There is an
option to specify the prefix to the protein name that indicates a
decoy; the default is "random_".</p>
   
<p>
The format of the input can be a directory containing the database
FASTA files, a text file with a list of FASTA files or a single
FASTA file.  If the protein database input contains suffix "fasta",
the program assumes a single-file input; otherwise, it checks whether
the input is a directory or a text file.</li>
</p>

<li>
sqt input &ndash; Q-Ranker recognizes sqt format for psm input. The psm
input can be specified as a single file with suffix "sqt" and should
be accompanied by the corresponding ms2 file as a third required
argument. Alternatively, psm input can be given as a text file containing
the list of all the "sqt" files and should be accompanied by the text
file with the list of the corresponding ms2 files as a third required
argument. 
</p>
Finally, the psm input can be specified as a directory in which all
the database search results are located. In this case, the program
collects all the files with prefix "sqt" contained in the directory and
analyses them jointly. As it finds each sqt file, it simultaneously
searches the ms2 input directory for an ms2 file with the same name,
but with the suffix "sqt" replaced with suffix the "ms2" (for example, yeast.sqt and yeast.ms2).

</p>
The multiple files can be results of many different experiments or of
multiple duplicate runs. They can also be the result of separate
target and decoy searches.  All such files in the given directory are
analyzed jointly.
</p>
<li>
ms2 input &ndash; The ms2 input can be specified as a single file with
suffix "ms2", as a text file containing the list of all the ms2
files or as a directory where all the ms2 files corresponding to
the psm input in the second argument can be found.

</ul>

<B>Output:</B>

<UL>
<p>
The program writes files to the folder <code>crux-output</code> by
default.  The name of the output folder can be set by the user using
the <code>--output-dir</code> option.  The following files will be
created:</p>

</li>

<li>
<b>qranker.target.psm.txt</b>: a tab-delimited file containing a
ranked list of target peptide-spectrum matches with the associated
Q-Ranker scores and q-values.  The following columns are included:
<ol>
<li>q-value: The minimal PSM-level false discovery rate at which this
  PSM is deemed significant.  This q-value is computed based on the
  ranking of the PSMs induced by the Q-Ranker score.</li>
<li>q-ranker score: The score assigned to the PSM by Q-Ranker.  Higher
  values correspond to more confident identifications.</code>
<li>scan: the scan number</li>
<li>charge: the inferred charge state</li>
<li>peptide: the peptide sequence</li>
<li>filename: name of the file in which the PSM appears</li>
</ol>
</li>

<li>
<b>qranker.psms.at.fdr.thresholds.txt</b>: a tab-delimited file
containing counts of PSMs identified at a range of q-value thresholds
on the training and testing sets. The following columns are included:
<ol>
<li>FDR thresh: False discovery rate threshold at which the PSM was accepted. </li>
<li>PSMs trn: Number of target PSMs identified on the training set. </code>
<li>PSMs tst: Number of target PSMs identified on the testing set. </li>
</ol>
</li>


<li>
<b>qranker.log.txt</b>: a file where the program reports its progress. 
</li>
</ul>



<b>Options:</b>

<ul>

<li>
<code>--enzyme trypsin|chymotrypsin|elastase</code> &ndash; The enzyme
used to digest the proteins in the experiment.  Default =
trypsin.</li>

<li>
<code>--decoy-prefix &lt;string&gt;</code> &ndash; specifies the
prefix of the protein names that indicates a decoy. Default = random_.
</li>

<li>
<code>--fileroot &lt;string&gt;</code> &ndash;
The <code>fileroot</code> string will be added as a prefix to all
output file names. Default = none.</li>

<li>
<code>--output-dir &lt;directory&gt;</code> &ndash; 
The name of the directory where output files will be created.
Default = crux-output.</li>

<li>
<code>--overwrite &lt;T/F&gt;</code> &ndash; The option applies to the
situation when the output directory specified for the run already
exists. If set to T, Q-Ranker will overwrite the contents of the
output directory specified for the run. Default = F.</li>

<li>
<code>--skip-cleanup &lt;T/F&gt;</code> &ndash; Q-Ranker analysis
begins with a pre-processsing step that creates a set of lookup tables
which are then used during training. Normally, these lookup tables are
deleted at the end of the Q-Ranker analysis, but setting this option
to <code>T</code> prevents the deletion of these tables.
Subsequently, the Q-Ranker analysis can be repeated more efficiently by
specifying the <code>--re-run</code> option (see below). Default =
F.</li>

<li>
<code>--re-run &lt;directory&gt;</code> &ndash; Re-run a previous
Q-Ranker analysis using a previously computed set of lookup tables.
For this option to work, the <code>--skip-cleanup</code> must have
been set to true when Q-Ranker was run the first time.</li>

<li>
<code>--use-spec-features &lt;T/F&gt;</code> &ndash; Q-Ranker uses
enriched feature set derived from the spectra in ms2 files. It can be
forced to use minimal feature set by setting the --use-spec-features
option to F. Default T.

<hr></hr>

</ul>

<a href="crux.html">Crux home</a>

</blockquote>
</body>
</html>
